<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your Order | PrimeTemplates</title>
    <style>
        body { font-family: 'Inter', sans-serif; background: #f4f7f9; padding: 20px; color: #2d3748; }
        .checkout-card { max-width: 420px; margin: 50px auto; background: white; padding: 35px; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.08); }
        .order-summary { background: #f7fafc; padding: 20px; border-radius: 16px; margin-bottom: 25px; }
        .row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.95rem; }
        .total-row { border-top: 2px solid #e2e8f0; margin-top: 15px; padding-top: 15px; font-weight: 800; font-size: 1.2rem; color: #3182ce; }
        .upi-box { background: #fffaf0; border: 2px dashed #ecc94b; padding: 20px; border-radius: 16px; text-align: center; margin-bottom: 25px; }
        .coupon-group { display: flex; gap: 8px; margin-bottom: 20px; }
        input { flex: 1; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; outline: none; }
        .btn-apply { background: #2d3748; color: white; border: none; padding: 0 15px; border-radius: 10px; cursor: pointer; }
        .btn-confirm { width: 100%; background: #3182ce; color: white; padding: 18px; border: none; border-radius: 14px; font-weight: 700; cursor: pointer; font-size: 1rem; box-shadow: 0 4px 14px rgba(49, 130, 206, 0.4); }
    </style>
</head>
<body>

<div class="checkout-card">
    <h2 style="text-align: center; margin-bottom: 25px;">Checkout</h2>

    <div class="order-summary">
        <p style="font-size: 0.75rem; font-weight: 700; color: #718096; margin-bottom: 4px;">YOUR SELECTION</p>
        <h3 id="itemName" style="margin-bottom: 15px;">Product Name</h3>
        <div class="row"><span>Base Price</span> <span id="baseDisplay">₹0</span></div>
        <div id="discRow" class="row" style="display:none; color: #38a169;"><span>Beta Discount</span> <span id="discAmt">-₹0</span></div>
        <div class="row total-row"><span>To Pay</span> <span id="finalDisplay">₹0</span></div>
    </div>

    <div class="coupon-group">
        <input type="text" id="checkCode" placeholder="Enter PRM Code">
        <button class="btn-apply" onclick="applyCode()">Apply</button>
    </div>

    <div class="upi-box">
        <p style="font-size: 0.8rem; font-weight: 700; margin-bottom: 8px;">PAY VIA UPI</p>
        <p style="font-size: 1.1rem; font-weight: 800; color: #c05621;">owais2011@ibl</p>
        <p style="font-size: 0.75rem; margin-top: 8px;">Transfer exactly <b id="payPrompt">₹0</b></p>
    </div>

    <p style="font-size: 0.8rem; text-align: center; color: #718096; margin-bottom: 20px;">
        Take a screenshot of payment and send to Instagram DMs for the file.
    </p>

    <button class="btn-confirm" onclick="toInsta()">Confirm on Instagram →</button>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const item = urlParams.get('item') || "Premium Template";
    const basePrice = parseInt(urlParams.get('price')) || 59;
    const preDisc = urlParams.get('discount') === 'true';

    document.getElementById('itemName').innerText = item.replace(/-/g, ' ');
    document.getElementById('baseDisplay').innerText = "₹" + basePrice;
    
    // Initial Price calculation
    let currentTotal = basePrice;
    updateUI(currentTotal);

    if(preDisc) applyCodeLogic();

    function updateUI(val) {
        document.getElementById('finalDisplay').innerText = "₹" + val;
        document.getElementById('payPrompt').innerText = "₹" + val;
    }

    function applyCodeLogic() {
        // If price is 300, give 100 off. If 59, give 30 off.
        let savings = (basePrice >= 300) ? 100 : 30;
        document.getElementById('discRow').style.display = 'flex';
        document.getElementById('discAmt').innerText = "-₹" + savings;
        updateUI(basePrice - savings);
    }

    function applyCode() {
        const c = document.getElementById('checkCode').value.toUpperCase();
        if(c.startsWith("PRM") && c.length === 8) {
            applyCodeLogic();
        } else {
            alert("Invalid Code");
        }
    }

    function toInsta() { window.location.href = "https://ig.me/m/primetemplate1"; }
</script>

</body>
</html>
